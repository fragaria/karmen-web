.principle {
  display: flex;
  position: relative;
  text-align: left;
  margin: auto;
}

.principle__box {
  width: 25%;
  background: map-get($palette, white);
  text-align: left;

  & + .principle__box {
    border-left: 1px map-get($palette, gray-semilight) solid;
  }
}

.principle-box {
  &--emphasized {
    background: map-get($palette, red);

    &,
    .principle-box__nr,
    .principle-box__sub {
      color: map-get($palette, white);
    }

    .principle-box__content:after {
      background: lighten(map-get($palette, red), $amount: 10);
    }

    .principle-box__img i {
      font-size: 144px;
    }
  }
}

.principle-box__nr {
  color: map-get($palette, red);
  font-weight: medium;

  @include baseline(s4, $bodytype, 1, $below: 1);
}

.principle-box__title {
  // @note: this is fixed by compensating on principle-box__content bottom padding
  @include baseline(s6, $headingtype, 1.25, $below: 1);
}

.principle-box__sub {
  color: map-get($palette, red);
  @include baseline(s2, $bodytype, $below: 1);

  a {
    @include anchor-style();
  }
}

.principle-box__img {
  padding: gu(1) gu(3);
}

.principle-box__content {
  // @note: see .principle-box__title
  padding: gu(1) gu(3) gu(1.5);
}

.principle-box__img {
  display: flex;
  min-height: gu(10);
  align-items: center;
  justify-content: center;

  img {
    display: block;
    margin: auto;
    // @note: needs to be fixed for the bottom line to work
    width: 100%;
  }
}

// Draw dashed line connecting individual boxes.
.principle-box:not(.principle-box--emphasized) .principle-box__img {
  position: relative;
  z-index: 2;

  // Red dot at the tip of the line
  &:before {
    content: '';
    position: absolute;
    z-index: -1;
    width: gu();
    height: gu();
    background: map-get($palette, red);
    right: gu(2.6); // match padding of .principle-box__img minus offset given by circle height
    bottom: 50%;
    border-radius: 50%;
    transform: translateY(gu(0.5));
  }

  // The line itself (pushed to right to avoid joining dashes)
  &:after {
    content: '';
    position: absolute;
    z-index: -1;
    left: 50%;
    width: 100%;
    bottom: 50%;
    border: 1px map-get($palette, red) dashed;
  }
}

// Last box cuts the hanging line part
.principle-box--cutoff {
  overflow: hidden;
}

.principle-box--emphasized .principle-box__img {
  &:before {
    content: fa-content($fa-var-check);
    font-family: 'Font Awesome 5 Free';
    display: inline-block;
    font-size: gu(5);
  }
}

.principle-box__content {
  position: relative;

  &:after {
    content: " ";
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    background: map-get($palette, gray-semilight);
    height: 1px;
  }
}
